| ID         | Название                              | Описание                                                                    | Метрика/Порог                                        | Проверка (чем/где)                                 | Компонент                | Приоритет |
| ---------- | ------------------------------------- | --------------------------------------------------------------------------- | ---------------------------------------------------- | -------------------------------------------------- | ------------------------ | --------- |
| **NFR-01** | Время отклика API                     | Все ручки API должны отвечать быстро под типовой нагрузкой                  | p95 ≤ 300 мс при 20 RPS                              | `locust` или `k6` тесты на stage                   | `main.py` / FastAPI      | Medium      |
| **NFR-02** | Ограничение на размер запроса         | API должен отклонять слишком большие payload’ы                              | ≤ 1 MB                                               | ручные тесты / pytest с большим JSON               | FastAPI middleware       | Medium    |
| **NFR-03** | Обработка ошибок в едином формате     | Все исключения возвращаются в формате `{error: {code, message}}`            | 100 % ручек покрыты                                  | тесты `test_internal_errors`, `test_validation_errors`, `test_not_cound_errors`                        | `main.py`                | High      |
| **NFR-04** | Защита от некорректных входных данных | Валидация входных данных через `pydantic`                                   | 100 % POST/PUT ручек                                 | pytest валидации, тест `test_validation_erros`                                   | `main.py`             | High      |
| **NFR-05** | Надёжность при сбое хранилища         | API корректно возвращает 500 при ошибке репозитория                         | Исключения логируются, код 500                       | тест `test_internal_errors`                  | `db.py`, `service.py`   | Medium    |
| **NFR-06** | Документированность API               | Все эндпоинты отображаются в `/docs`                                        | Автогенерация OpenAPI без ошибок                     | ручная проверка                                    | FastAPI / OpenAPI        | Medium    |
| **NFR-07** | Уровень покрытия тестами              | Покрытие тестами не ниже 80 %                                          | ≥ 80 % строк кода                                    | `pytest --cov=app`                                 | Все модули               | High      |
| **NFR-08** | Логирование ошибок и событий          | Все критические ошибки и важные события должны логироваться в stdout/stderr | 90 % ошибок и запусков сервисов фиксируются в логах | проверка логов во время тестов и работы приложения | `main.py`, `service.py` | Medium    |
